version: '3.8'

services:
  daily-commodity-updater:
    build: .
    container_name: daily-commodity-updater
    environment:
      - API_KEY=${API_KEY}
      - KAGGLE_USERNAME=${KAGGLE_USERNAME}
      - KAGGLE_KEY=${KAGGLE_KEY}
      - KAGGLE_DATASET=${KAGGLE_DATASET}
      - RUN_INITIAL_UPDATE=true  # Set to false to skip initial run
    volumes:
      # Persistent volume for data storage
      - commodity_data:/app/data/commodity-prices
      # Persistent volume for logs
      - commodity_logs:/app/logs
    restart: unless-stopped

volumes:
  commodity_data:
    driver: local
  commodity_logs:
    driver: local